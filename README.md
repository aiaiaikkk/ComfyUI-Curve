# ComfyUI-Curve

<!-- è¯­è¨€åˆ‡æ¢ | Language Switch -->
<div align="center">
  <a href="#ä¸­æ–‡">ä¸­æ–‡</a> | <a href="#english">English</a>
</div>

---

## ä¸­æ–‡

ComfyUIä¸“ä¸šè‰²å½©è°ƒæ•´æ‰©å±•ï¼Œæä¾›ç±»ä¼¼Photoshopçš„æ›²çº¿ã€HSLã€è‰²é˜¶è°ƒæ•´åŠŸèƒ½ï¼Œæ”¯æŒ70+ç§é¢„è®¾é£æ ¼ã€é«˜çº§é®ç½©å’ŒLightroomé£æ ¼çš„è‰²å½©åˆ†çº§åŠŸèƒ½ã€‚

### ğŸŒŸ ä¸»è¦åŠŸèƒ½

é¡¹ç›®ä»‹ç»è§†é¢‘ï¼šhttps://www.bilibili.com/video/BV1QuMFzRE5i/

#### ğŸ¨ æ›²çº¿è°ƒæ•´ (Photoshop Curve)
![Photoshop Curve Node](images/PS_Curve.png)
- ç±»ä¼¼Photoshopçš„ä¸“ä¸šæ›²çº¿è°ƒæ•´ï¼Œæ”¯æŒå¤šç§æ’å€¼æ–¹å¼
- **åŒå‡»èŠ‚ç‚¹è¿›å…¥å®æ—¶è°ƒæ•´ç•Œé¢**ï¼šåœ¨å¼¹å‡ºçª—å£ä¸­ç›´æ¥æ‹–åŠ¨æ§åˆ¶ç‚¹ï¼Œå³åˆ»è§‚å¯Ÿå›¾åƒå˜åŒ–æ•ˆæœ
- å®æ—¶æ›²çº¿å›¾è¡¨ï¼Œå¯é€‰ç›´æ–¹å›¾èƒŒæ™¯æ˜¾ç¤º
- æ”¯æŒRGBæ•´ä½“æˆ–å•ç‹¬R/G/Bé€šé“è°ƒæ•´
- å¯è°ƒæ›²çº¿æ•ˆæœå¼ºåº¦ï¼ˆ0-200%ï¼‰
- **å¼¹çª—å†…è°ƒæ•´ç«‹å³åº”ç”¨**ï¼šæ‰€æœ‰æ›²çº¿ä¿®æ”¹æ— éœ€é‡æ–°è¿è¡Œå·¥ä½œæµå³å¯åœ¨å¼¹çª—å†…å®æ—¶æŸ¥çœ‹æ•ˆæœ

#### ğŸ­ HSLè°ƒæ•´ (Photoshop HSL)
![Photoshop HSL Node](images/HSL.png)
- ç²¾å‡†æ§åˆ¶8ä¸ªé¢œè‰²é€šé“ï¼šçº¢ã€æ©™ã€é»„ã€ç»¿ã€æµ…ç»¿ã€è“ã€ç´«ã€å“çº¢
- æ¯ä¸ªé¢œè‰²å¯ç‹¬ç«‹è°ƒæ•´è‰²ç›¸ã€é¥±å’Œåº¦ã€æ˜åº¦
- **åŒå‡»èŠ‚ç‚¹æ‰“å¼€HSLè°ƒæ•´å¼¹çª—**ï¼šåœ¨å¼¹å‡ºçª—å£ä¸­æ»‘åŠ¨è°ƒèŠ‚å™¨ç«‹å³æ˜¾ç¤ºé¢œè‰²å˜åŒ–æ•ˆæœï¼Œæ‰€è§å³æ‰€å¾—
- æ”¯æŒé®ç½©å’Œç¾½åŒ–æ•ˆæœ
- **å¼¹çª—å†…å®æ—¶äº¤äº’å“åº”**ï¼šåœ¨å¼¹å‡ºç•Œé¢ä¸­è°ƒæ•´ä»»ä½•HSLå‚æ•°éƒ½èƒ½å³æ—¶åæ˜ åœ¨é¢„è§ˆå›¾åƒä¸Š

#### ğŸšï¸ è‰²é˜¶è°ƒæ•´ (Photoshop Levels)
![Photoshop Levels Node](images/PS_Levels.png)
- **åŒå‡»èŠ‚ç‚¹æ‰“å¼€Photoshopé£æ ¼è‰²é˜¶è°ƒæ•´ç•Œé¢**ï¼šä¸“ä¸šä¸‰ç‚¹æ§åˆ¶ï¼ˆé»‘åœºã€ç°åœºã€ç™½åœºï¼‰
- **å®æ—¶é¢„è§ˆè°ƒæ•´**ï¼šæ‹–åŠ¨æ»‘å—å³æ—¶æŸ¥çœ‹è‰²é˜¶è°ƒæ•´æ•ˆæœ
- **è‡ªåŠ¨è‰²é˜¶åŠŸèƒ½**ï¼šä¸€é”®è‡ªåŠ¨ä¼˜åŒ–å›¾åƒå¯¹æ¯”åº¦å’Œè‰²é˜¶åˆ†å¸ƒ
- **è‡ªåŠ¨å¯¹æ¯”åº¦åŠŸèƒ½**ï¼šæ™ºèƒ½å¢å¼ºå›¾åƒå¯¹æ¯”åº¦
- **ç²¾ç¡®æ•°å€¼æ§åˆ¶**ï¼šè¾“å…¥/è¾“å‡ºé»‘ç™½åœºç‚¹ã€ä¼½é©¬å€¼ç²¾ç¡®è°ƒæ•´
- **ç›´æ–¹å›¾èƒŒæ™¯æ˜¾ç¤º**ï¼šåœ¨è‰²é˜¶ç•Œé¢ä¸­æ˜¾ç¤ºå®æ—¶ç›´æ–¹å›¾ï¼Œä¾¿äºç²¾ç¡®è°ƒæ•´

#### ğŸ¨ è‰²å½©åˆ†çº§ (Color Grading)
![Color Grading Node](images/ColorGradingWheels.png)
- **åŒå‡»èŠ‚ç‚¹æ‰“å¼€Lightroomé£æ ¼çš„è‰²å½©åˆ†çº§ç•Œé¢**ï¼šä¸“ä¸šä¸‰è‰²è½®è®¾è®¡ï¼ˆé˜´å½±ã€ä¸­é—´è°ƒã€é«˜å…‰ï¼‰
- **å®æ—¶äº¤äº’å¼è‰²è½®æ“ä½œ**ï¼šç›´æ¥åœ¨è‰²è½®ä¸Šæ‹–æ‹½è°ƒæ•´è‰²ç›¸å’Œé¥±å’Œåº¦ï¼Œå®æ—¶é¢„è§ˆæ•ˆæœ
- **è´Ÿé¥±å’Œåº¦å®Œå…¨å»é¥±å’Œ**ï¼š-100é¥±å’Œåº¦å®ç°å®Œå…¨ç°åº¦æ•ˆæœï¼Œä¸å†äº§ç”Ÿåè‰²
- **Shifté”®è´Ÿé¥±å’Œåº¦æ”¯æŒ**ï¼šæŒ‰ä½Shifté”®åœ¨è‰²è½®ä¸Šæ“ä½œå¯è®¾ç½®è´Ÿé¥±å’Œåº¦å€¼
- **ç²¾ç¡®çš„Labè‰²å½©ç©ºé—´å¤„ç†**ï¼šä½¿ç”¨ä¸“ä¸šLabè‰²å½©ç®—æ³•ï¼Œç¡®ä¿è‰²å½©å‡†ç¡®æ€§
- **å¤šç§æ··åˆæ¨¡å¼**ï¼šnormalã€multiplyã€screenã€overlayã€soft_lightç­‰ä¸“ä¸šæ··åˆé€‰é¡¹
- **åŒºåŸŸæ™ºèƒ½é®ç½©**ï¼šåŸºäºäº®åº¦çš„å¹³æ»‘è¿‡æ¸¡é®ç½©ï¼Œç²¾ç¡®æ§åˆ¶é˜´å½±ã€ä¸­é—´è°ƒã€é«˜å…‰åŒºåŸŸ
- **å¼ºåº¦æ§åˆ¶**ï¼šå¯è°ƒæ•´æ•´ä½“æ•ˆæœå¼ºåº¦ï¼ˆ0-200%ï¼‰

#### ğŸ” ç›´æ–¹å›¾åˆ†æ (Histogram Analysis)
![Histogram Analysis Node](images/Histogram_Analysis.png)
- ä¸“ä¸šçš„å›¾åƒç›´æ–¹å›¾åˆ†æèŠ‚ç‚¹
- **è¯¦ç»†çš„ç»Ÿè®¡ä¿¡æ¯**ï¼šå¹³å‡å€¼ã€ä¸­ä½æ•°ã€æ ‡å‡†å·®ç­‰å›¾åƒç»Ÿè®¡æ•°æ®
- **åƒç´ åˆ†å¸ƒå¯è§†åŒ–**ï¼šæ¸…æ™°æ˜¾ç¤ºå›¾åƒçš„äº®åº¦å’Œé¢œè‰²åˆ†å¸ƒæƒ…å†µ
- **å¤šé€šé“æ”¯æŒ**ï¼šæ”¯æŒRGBæ•´ä½“æˆ–å•ç‹¬R/G/Bé€šé“åˆ†æ
- ä¸ºå…¶ä»–è°ƒæ•´èŠ‚ç‚¹æä¾›æ•°æ®å‚è€ƒ

#### ğŸ¯ Camera Rawå¢å¼º (Camera Raw Enhance)
![Camera Raw Enhance Node](images/CameraRawEnhanced.png)
- é›†æˆAdobe Camera Rawçš„ä¸‰ä¸ªæ ¸å¿ƒå¢å¼ºåŠŸèƒ½
- **çº¹ç† (Texture)**ï¼šå¢å¼ºä¸­ç­‰å¤§å°ç»†èŠ‚çš„å¯¹æ¯”åº¦ï¼ŒèŒƒå›´-100åˆ°100
- **æ¸…æ™°åº¦ (Clarity)**ï¼šå¢å¼ºä¸­é—´è°ƒå¯¹æ¯”åº¦ï¼Œè®©å›¾åƒæ›´é”åˆ©ï¼ŒèŒƒå›´-100åˆ°100
- **å»è–„é›¾ (Dehaze)**ï¼šå‡å°‘æˆ–å¢åŠ å¤§æ°”é›¾éœ¾æ•ˆæœï¼ŒèŒƒå›´-100åˆ°100
- æ”¯æŒæ··åˆæ§åˆ¶å’Œæ•´ä½“å¼ºåº¦è°ƒèŠ‚
- åŒ…å«å®Œæ•´çš„å‰ç«¯JavaScriptç•Œé¢ï¼Œæ”¯æŒå®æ—¶é¢„è§ˆ

#### ğŸ–¼ï¸ é¢„è®¾é£æ ¼ (Curve Preset)
- 70+ç§ä¸“ä¸šè°ƒè‰²é¢„è®¾
- æ¶µç›–äººåƒã€é£æ™¯ã€ç”µå½±ã€å¤å¤ç­‰å¤šç§é£æ ¼
- ä¸€é”®åº”ç”¨ï¼Œå¿«é€Ÿå®ç°ä¸“ä¸šè°ƒè‰²æ•ˆæœ

#### ğŸ¯ é«˜çº§é®ç½©æ”¯æŒ
- é€‰æ‹©æ€§è°ƒæ•´ç‰¹å®šåŒºåŸŸ
- é®ç½©è¾¹ç¼˜ç¾½åŒ–ï¼Œè‡ªç„¶è¿‡æ¸¡
- æ”¯æŒé®ç½©åè½¬

#### ğŸ’¡ äº¤äº’å¼ç¼–è¾‘
- **åŒå‡»èŠ‚ç‚¹æ‰“å¼€ä¸“ä¸šè°ƒæ•´å¼¹çª—**ï¼Œåœ¨å¼¹å‡ºç•Œé¢ä¸­å®æ—¶é¢„è§ˆè°ƒæ•´æ•ˆæœ
- **å¼¹çª—å†…æ‰€æœ‰è°ƒæ•´å‚æ•°å®æ—¶åŒæ­¥**ï¼Œæ— éœ€é‡æ–°è¿è¡Œå·¥ä½œæµ
- **é›¶å»¶è¿Ÿåé¦ˆ**ï¼šåœ¨å¼¹å‡ºçª—å£ä¸­è°ƒæ•´å‚æ•°æ—¶å›¾åƒå®æ—¶æ›´æ–°ï¼Œåƒä½¿ç”¨ä¸“ä¸šå›¾åƒç¼–è¾‘è½¯ä»¶ä¸€æ ·æµç•…
- æ”¯æŒæ›²çº¿ã€HSLã€è‰²é˜¶å’Œè‰²å½©åˆ†çº§èŠ‚ç‚¹çš„äº¤äº’å¼ç¼–è¾‘
- ç±»ä¼¼Photoshopçš„ä¸“ä¸šç¼–è¾‘ä½“éªŒ

### ğŸ“¥ å®‰è£…æ–¹æ³•

#### Gitå…‹éš†ï¼ˆæ¨èï¼‰
```bash
cd ComfyUI/custom_nodes
git clone https://github.com/your-username/ComfyUI-Curve.git
```

#### æ‰‹åŠ¨ä¸‹è½½
1. ä¸‹è½½ZIPæ–‡ä»¶
2. è§£å‹åˆ° `ComfyUI/custom_nodes/ComfyUI-Curve`
3. é‡å¯ComfyUI

#### ä¾èµ–è¦æ±‚
- torch>=1.9.0
- numpy>=1.21.0
- scipy>=1.7.0

### ğŸ“ ä½¿ç”¨æŠ€å·§

#### å¦‚ä½•ä½¿ç”¨å¼¹çª—å®æ—¶é¢„è§ˆåŠŸèƒ½

1. **æ›²çº¿è°ƒæ•´å®æ—¶é¢„è§ˆ**ï¼š
   - åœ¨å·¥ä½œæµä¸­æ·»åŠ Photoshop CurveèŠ‚ç‚¹
   - è¿æ¥è¾“å…¥å›¾åƒå’Œé®ç½©ï¼ˆå¯é€‰ï¼‰
   - **åŒå‡»èŠ‚ç‚¹**æ‰“å¼€è°ƒæ•´å¼¹çª—
   - æ­¤æ—¶æ‚¨å¯ä»¥çœ‹åˆ°å¼¹å‡ºçª—å£ä¸­çš„å›¾åƒé¢„è§ˆåŒºåŸŸå’Œæ›²çº¿ç¼–è¾‘åŒºåŸŸ
   - åœ¨å¼¹çª—å†…æ›²çº¿ä¸Šæ·»åŠ æ§åˆ¶ç‚¹ï¼š**ç‚¹å‡»æ›²çº¿**æ·»åŠ æ–°æ§åˆ¶ç‚¹
   - åœ¨å¼¹çª—å†…æ‹–åŠ¨æ§åˆ¶ç‚¹ï¼š**å·¦é”®æŒ‰ä½å¹¶æ‹–åŠ¨**æ§åˆ¶ç‚¹ï¼Œè§‚å¯Ÿå›¾åƒå®æ—¶å˜åŒ–
   - åœ¨å¼¹çª—å†…åˆ é™¤æ§åˆ¶ç‚¹ï¼š**å³é”®ç‚¹å‡»**æ§åˆ¶ç‚¹
   - åœ¨å¼¹çª—å†…åˆ‡æ¢é€šé“ï¼šç‚¹å‡»**RGBã€Rã€Gã€B**æŒ‰é’®åˆ‡æ¢ä¸åŒé€šé“æ›²çº¿
   - åœ¨å¼¹çª—å†…è°ƒæ•´å¼ºåº¦ï¼šç§»åŠ¨**å¼ºåº¦æ»‘å—**å³æ—¶æŸ¥çœ‹ä¸åŒå¼ºåº¦æ•ˆæœ
   - å®Œæˆåç‚¹å‡»å¼¹çª—ä¸­çš„**åº”ç”¨**æŒ‰é’®ï¼Œå‚æ•°å°†è‡ªåŠ¨åŒæ­¥åˆ°èŠ‚ç‚¹

2. **HSLè°ƒæ•´å®æ—¶é¢„è§ˆ**ï¼š
   - åœ¨å·¥ä½œæµä¸­æ·»åŠ Photoshop HSLèŠ‚ç‚¹
   - è¿æ¥è¾“å…¥å›¾åƒå’Œé®ç½©ï¼ˆå¯é€‰ï¼‰
   - **åŒå‡»èŠ‚ç‚¹**æ‰“å¼€HSLè°ƒæ•´å¼¹çª—
   - åœ¨å¼¹å‡ºçª—å£ä¸­é€‰æ‹©æ‚¨æƒ³è°ƒæ•´çš„é¢œè‰²é€šé“ï¼ˆçº¢ã€æ©™ã€é»„ç­‰ï¼‰
   - åœ¨å¼¹çª—å†…ç§»åŠ¨**è‰²ç›¸æ»‘å—**ï¼šå·¦å³æ‹–åŠ¨è°ƒæ•´è¯¥é¢œè‰²çš„è‰²ç›¸å€¼
   - åœ¨å¼¹çª—å†…ç§»åŠ¨**é¥±å’Œåº¦æ»‘å—**ï¼šå·¦å³æ‹–åŠ¨è°ƒæ•´è¯¥é¢œè‰²çš„é¥±å’Œåº¦
   - åœ¨å¼¹çª—å†…ç§»åŠ¨**æ˜åº¦æ»‘å—**ï¼šå·¦å³æ‹–åŠ¨è°ƒæ•´è¯¥é¢œè‰²çš„æ˜åº¦
   - å¼¹çª—å†…æ¯ä¸ªæ»‘å—è°ƒæ•´éƒ½ä¼š**å®æ—¶æ›´æ–°**é¢„è§ˆå›¾åƒ
   - å®Œæˆåç‚¹å‡»å¼¹çª—ä¸­çš„**åº”ç”¨**æŒ‰é’®ï¼Œå‚æ•°å°†è‡ªåŠ¨åŒæ­¥åˆ°èŠ‚ç‚¹

3. **Color Gradingè°ƒæ•´å®æ—¶é¢„è§ˆ**ï¼š
   - åœ¨å·¥ä½œæµä¸­æ·»åŠ Color GradingèŠ‚ç‚¹
   - è¿æ¥è¾“å…¥å›¾åƒå’Œé®ç½©ï¼ˆå¯é€‰ï¼‰
   - **åŒå‡»èŠ‚ç‚¹**æ‰“å¼€è‰²å½©åˆ†çº§è°ƒæ•´å¼¹çª—
   - åœ¨å¼¹å‡ºçª—å£ä¸­æ‚¨å°†çœ‹åˆ°ä¸‰ä¸ªè‰²è½®ï¼šé˜´å½±ã€ä¸­é—´è°ƒå’Œé«˜å…‰
   - **è‰²è½®æ“ä½œæŠ€å·§**ï¼š
     - æ™®é€šç‚¹å‡»æ‹–æ‹½ï¼šè®¾ç½®æ­£é¥±å’Œåº¦ï¼ˆå¢å¼ºé¢œè‰²ï¼‰
     - **æŒ‰ä½Shifté”®æ‹–æ‹½**ï¼šè®¾ç½®è´Ÿé¥±å’Œåº¦ï¼ˆå»é¥±å’Œæ•ˆæœï¼‰
     - è‰²è½®æŒ‡ç¤ºå™¨é¢œè‰²ï¼šç™½è‰²=æ­£é¥±å’Œåº¦ï¼Œç°è‰²=è´Ÿé¥±å’Œåº¦
   - **é¥±å’Œåº¦æ»‘å—**ï¼š-100åˆ°+100èŒƒå›´
     - æ­£å€¼ï¼šå¢å¼ºè¯¥åŒºåŸŸçš„é¢œè‰²é¥±å’Œåº¦
     - è´Ÿå€¼ï¼šé™ä½è¯¥åŒºåŸŸçš„é¢œè‰²é¥±å’Œåº¦ï¼ˆæœå‘ç°åº¦ï¼‰
     - -100ï¼šè¯¥åŒºåŸŸå®Œå…¨å»é¥±å’Œå˜ä¸ºç°åº¦
   - ä½¿ç”¨äº®åº¦æ»‘å—è°ƒæ•´å„åŒºåŸŸæ˜æš—ç¨‹åº¦
   - é€‰æ‹©æ··åˆæ¨¡å¼æ§åˆ¶é¢œè‰²åº”ç”¨æ–¹å¼
   - è°ƒæ•´æ•´ä½“å¼ºåº¦æ§åˆ¶æ•ˆæœç¨‹åº¦
   - é¢„è§ˆçª—å£å®æ—¶æ›´æ–°ï¼Œæ‰€è§å³æ‰€å¾—
   - å®Œæˆåç‚¹å‡»å¼¹çª—ä¸­çš„**åº”ç”¨**æŒ‰é’®ï¼Œå‚æ•°å°†è‡ªåŠ¨åŒæ­¥åˆ°èŠ‚ç‚¹


5. **è‰²é˜¶è°ƒæ•´å®æ—¶é¢„è§ˆ**ï¼š
   - åœ¨å·¥ä½œæµä¸­æ·»åŠ Photoshop LevelsèŠ‚ç‚¹
   - è¿æ¥è¾“å…¥å›¾åƒå’Œé®ç½©ï¼ˆå¯é€‰ï¼‰
   - **åŒå‡»èŠ‚ç‚¹**æ‰“å¼€è‰²é˜¶è°ƒæ•´å¼¹çª—
   - åœ¨å¼¹å‡ºçª—å£ä¸­æ‚¨å°†çœ‹åˆ°å¸¦ç›´æ–¹å›¾èƒŒæ™¯çš„è‰²é˜¶è°ƒæ•´ç•Œé¢
   - **ä¸‰ç‚¹æ§åˆ¶è°ƒæ•´**ï¼š
     - å·¦ä¾§æ»‘å—ï¼šè°ƒæ•´é»‘åœºç‚¹ï¼ˆè¾“å…¥æš—éƒ¨èŒƒå›´ï¼‰
     - ä¸­é—´æ»‘å—ï¼šè°ƒæ•´ä¼½é©¬å€¼ï¼ˆä¸­é—´è°ƒäº®åº¦ï¼‰
     - å³ä¾§æ»‘å—ï¼šè°ƒæ•´ç™½åœºç‚¹ï¼ˆè¾“å…¥äº®éƒ¨èŒƒå›´ï¼‰
   - **è¾“å‡ºè‰²é˜¶è°ƒæ•´**ï¼šè®¾ç½®è¾“å‡ºçš„é»‘ç™½åœºèŒƒå›´
   - **è‡ªåŠ¨åŠŸèƒ½**ï¼š
     - ç‚¹å‡»"è‡ªåŠ¨è‰²é˜¶"æŒ‰é’®è‡ªåŠ¨ä¼˜åŒ–å›¾åƒå¯¹æ¯”åº¦
     - ç‚¹å‡»"è‡ªåŠ¨å¯¹æ¯”åº¦"æŒ‰é’®æ™ºèƒ½å¢å¼ºå¯¹æ¯”åº¦
   - æ‰€æœ‰è°ƒæ•´éƒ½ä¼šåœ¨é¢„è§ˆçª—å£ä¸­å®æ—¶æ˜¾ç¤ºæ•ˆæœ
   - å®Œæˆåç‚¹å‡»å¼¹çª—ä¸­çš„**åº”ç”¨**æŒ‰é’®ï¼Œå‚æ•°å°†è‡ªåŠ¨åŒæ­¥åˆ°èŠ‚ç‚¹

4. **å¼¹çª—é¢„è§ˆç•Œé¢é€šç”¨æ“ä½œ**ï¼š
   - **æ”¾å¤§/ç¼©å°é¢„è§ˆ**ï¼šåœ¨å¼¹çª—å†…ä½¿ç”¨é¼ æ ‡æ»šè½®æˆ–+/-æŒ‰é’®
   - **å¹³ç§»é¢„è§ˆ**ï¼šåœ¨å¼¹çª—å†…æŒ‰ä½ä¸­é”®å¹¶æ‹–åŠ¨
   - **å¯¹æ¯”åŸå›¾**ï¼šåœ¨å¼¹çª—å†…æŒ‰ä½ç©ºæ ¼é”®æŸ¥çœ‹åŸå§‹å›¾åƒï¼Œé‡Šæ”¾è¿”å›è°ƒæ•´åæ•ˆæœ
   - **é‡ç½®å‚æ•°**ï¼šç‚¹å‡»å¼¹çª—å†…çš„é‡ç½®æŒ‰é’®æ¢å¤é»˜è®¤è®¾ç½®
   - **å–æ¶ˆç¼–è¾‘**ï¼šç‚¹å‡»å¼¹çª—å†…çš„å–æ¶ˆæŒ‰é’®æ”¾å¼ƒå½“å‰æ›´æ”¹
   - **åº”ç”¨ç¼–è¾‘**ï¼šç‚¹å‡»å¼¹çª—å†…çš„åº”ç”¨æŒ‰é’®ç¡®è®¤æ›´æ”¹å¹¶åŒæ­¥åˆ°èŠ‚ç‚¹

#### æ›²çº¿è°ƒæ•´æŠ€å·§
- Så½¢æ›²çº¿ï¼šå¢åŠ å¯¹æ¯”åº¦
- åSå½¢ï¼šå‡å°‘å¯¹æ¯”åº¦
- ä¸Šç§»æ›²çº¿ï¼šæäº®å›¾åƒ
- ä¸‹ç§»æ›²çº¿ï¼šå‹æš—å›¾åƒ
- æ›²çº¿æ ¼å¼ï¼š`x1,y1;x2,y2;x3,y3`ï¼ˆä¾‹å¦‚ï¼š`0,0;128,150;255,255`ï¼‰
- **å®æ—¶é¢„è§ˆæŠ€å·§**ï¼šåœ¨å¼¹çª—ä¸­ä½¿ç”¨å¤šä¸ªæ§åˆ¶ç‚¹å¾®è°ƒå±€éƒ¨åŒºåŸŸï¼Œè§‚å¯Ÿå®æ—¶æ•ˆæœæ‰¾åˆ°æœ€ä½³è°ƒæ•´

#### HSLè°ƒæ•´æŠ€å·§
- è‚¤è‰²è°ƒæ•´ï¼šå¾®è°ƒçº¢æ©™è‰²ç›¸å’Œé¥±å’Œåº¦
- å¤©ç©ºå¢å¼ºï¼šè°ƒæ•´è“è‰²å’Œæµ…ç»¿é€šé“
- å¶ç»¿å¢å¼ºï¼šè°ƒæ•´ç»¿è‰²å’Œé»„è‰²é€šé“
- æ—¥è½æ•ˆæœï¼šå¢å¼ºæ©™è‰²å’Œå“çº¢é€šé“
- **å®æ—¶é¢„è§ˆæŠ€å·§**ï¼šåœ¨å¼¹çª—ä¸­é€ä¸ªé€šé“è°ƒæ•´å¹¶è§‚å¯Ÿå®æ—¶æ•ˆæœï¼Œæ‰¾åˆ°ç†æƒ³çš„é¢œè‰²å¹³è¡¡ç‚¹

#### ç›´æ–¹å›¾åˆ†ææŠ€å·§
- **äº®åº¦åˆ†å¸ƒåˆ¤æ–­**ï¼š
  - å·¦ä¾§å †ç§¯ï¼šå›¾åƒåæš—ï¼Œè€ƒè™‘æäº®å¤„ç†
  - å³ä¾§å †ç§¯ï¼šå›¾åƒåäº®ï¼Œè€ƒè™‘å‹æš—å¤„ç†
  - ä¸­é—´é›†ä¸­ï¼šå¯¹æ¯”åº¦è¾ƒä½ï¼Œéœ€è¦å¢å¼ºå¯¹æ¯”
  - åŒå³°åˆ†å¸ƒï¼šå›¾åƒå±‚æ¬¡ä¸°å¯Œï¼Œå¯¹æ¯”åº¦è‰¯å¥½
- **é¢œè‰²é€šé“åˆ†æ**ï¼š
  - R/G/Bé€šé“åç§»ï¼šåˆ¤æ–­è‰²åé—®é¢˜
  - æŸé€šé“è¿‡åº¦é›†ä¸­ï¼šè¯¥é¢œè‰²é¥±å’Œåº¦å¯èƒ½è¿‡é«˜æˆ–è¿‡ä½
- **ç»Ÿè®¡æ•°æ®åº”ç”¨**ï¼š
  - å¹³å‡å€¼ï¼šåˆ¤æ–­æ•´ä½“äº®åº¦æ°´å¹³
  - æ ‡å‡†å·®ï¼šè¯„ä¼°å›¾åƒå¯¹æ¯”åº¦å’Œå±‚æ¬¡
  - ä¸­ä½æ•°ï¼šäº†è§£åƒç´ åˆ†å¸ƒçš„å¹³è¡¡ç‚¹

#### è‰²é˜¶è°ƒæ•´æŠ€å·§
- **ä¸‰ç‚¹æ§åˆ¶ç­–ç•¥**ï¼š
  - é»‘åœºç‚¹ï¼šè®¾ç½®å›¾åƒä¸­æœ€æš—éƒ¨åˆ†çš„ä½ç½®ï¼Œå½±å“é˜´å½±ç»†èŠ‚
  - ç™½åœºç‚¹ï¼šè®¾ç½®å›¾åƒä¸­æœ€äº®éƒ¨åˆ†çš„ä½ç½®ï¼Œå½±å“é«˜å…‰ç»†èŠ‚
  - ä¼½é©¬å€¼ï¼šè°ƒæ•´ä¸­é—´è°ƒäº®åº¦ï¼Œ<1å˜äº®ï¼Œ>1å˜æš—
- **è‡ªåŠ¨åŠŸèƒ½ä½¿ç”¨**ï¼š
  - è‡ªåŠ¨è‰²é˜¶ï¼šé€‚åˆæ¬ æ›æˆ–è¿‡æ›å›¾åƒçš„å¿«é€Ÿä¿®æ­£
  - è‡ªåŠ¨å¯¹æ¯”åº¦ï¼šé€‚åˆå¯¹æ¯”åº¦ä¸è¶³çš„å¹³æ·¡å›¾åƒ
- **è¾“å‡ºè‰²é˜¶æ§åˆ¶**ï¼š
  - å‹ç¼©åŠ¨æ€èŒƒå›´ï¼šé€‚åˆæ‰“å°è¾“å‡ºæˆ–ç‰¹æ®Šæ•ˆæœ
  - æ‰©å±•è¾“å‡ºèŒƒå›´ï¼šå¢å¼ºå›¾åƒå¯¹æ¯”åº¦
- **ç»“åˆç›´æ–¹å›¾è°ƒæ•´**ï¼šè§‚å¯Ÿç›´æ–¹å›¾å˜åŒ–ï¼Œé¿å…è¿‡åº¦è°ƒæ•´å¯¼è‡´çš„è‰²é˜¶æ–­å±‚

#### Color GradingæŠ€å·§
- **é¥±å’Œåº¦è°ƒæ•´æŠ€å·§**ï¼š
  - æ­£é¥±å’Œåº¦ï¼ˆ1-100ï¼‰ï¼šå¢å¼ºè¯¥åŒºåŸŸçš„é¢œè‰²é²œè‰³åº¦
  - è´Ÿé¥±å’Œåº¦ï¼ˆ-1åˆ°-100ï¼‰ï¼šé™ä½è¯¥åŒºåŸŸçš„é¢œè‰²é²œè‰³åº¦ï¼Œæœå‘ç°åº¦
  - å…¨åŒºåŸŸ-100é¥±å’Œåº¦ï¼šå®ç°å®Œå…¨ç°åº¦æ•ˆæœï¼Œé€‚åˆåˆ¶ä½œé»‘ç™½ç…§ç‰‡åŸºåº•
  - é€‰æ‹©æ€§å»é¥±å’Œï¼šåªå¯¹ç‰¹å®šåŒºåŸŸï¼ˆå¦‚é˜´å½±æˆ–é«˜å…‰ï¼‰è®¾ç½®è´Ÿé¥±å’Œåº¦
- **è‰²è½®æ“ä½œæŠ€å·§**ï¼š
  - æ™®é€šæ‹–æ‹½ï¼šè°ƒæ•´è‰²ç›¸å’Œæ­£é¥±å’Œåº¦
  - Shift+æ‹–æ‹½ï¼šè°ƒæ•´è‰²ç›¸å’Œè´Ÿé¥±å’Œåº¦ï¼ˆå»é¥±å’Œæ–¹å‘ï¼‰
  - è§‚å¯ŸæŒ‡ç¤ºå™¨ï¼šç™½è‰²åœ†ç‚¹=æ­£é¥±å’Œåº¦ï¼Œç°è‰²åœ†ç‚¹=è´Ÿé¥±å’Œåº¦
- **é£æ ¼åŒ–è°ƒè‰²**ï¼š
  - ç”µå½±é£æ ¼ï¼šé˜´å½±åŒºåŸŸæ·»åŠ è“è‰²ï¼Œé«˜å…‰æ·»åŠ æš–è‰²
  - å¤å¤æ•ˆæœï¼šé˜´å½±æ·»åŠ é’è‰²ï¼Œé«˜å…‰æ·»åŠ æ©™é»„è‰²  
  - æ—¥è½æ•ˆæœï¼šé˜´å½±æ·»åŠ ç´«è‰²ï¼Œé«˜å…‰æ·»åŠ æ©™è‰²
  - å†·è°ƒé£æ ¼ï¼šæ‰€æœ‰åŒºåŸŸæœå‘è“é’è‰²è°ƒæ•´
  - æš–è°ƒé£æ ¼ï¼šæ‰€æœ‰åŒºåŸŸæœå‘æ©™é»„è‰²è°ƒæ•´
- **æ··åˆæ¨¡å¼åº”ç”¨**ï¼š
  - soft_lightï¼šè‡ªç„¶çš„é¢œè‰²å¢å¼ºï¼Œé€‚åˆå¾®è°ƒ
  - overlayï¼šå¼ºçƒˆçš„å¯¹æ¯”å¢å¼ºï¼Œé€‚åˆæˆå‰§æ•ˆæœ
  - multiplyï¼šå‹æš—æ•ˆæœï¼Œé€‚åˆè¥é€ ç¥ç§˜æ°›å›´
  - screenï¼šæäº®æ•ˆæœï¼Œé€‚åˆæ¢¦å¹»é£æ ¼

#### Camera Rawå¢å¼ºæŠ€å·§
- **çº¹ç†è°ƒæ•´**ï¼š
  - æ­£å€¼ï¼ˆ1-100ï¼‰ï¼šå¢å¼ºç»†èŠ‚ï¼Œè®©å›¾åƒæ›´æœ‰è´¨æ„Ÿ
  - è´Ÿå€¼ï¼ˆ-1åˆ°-100ï¼‰ï¼šæŸ”åŒ–ç»†èŠ‚ï¼Œé€‚åˆäººåƒçš®è‚¤å¤„ç†
- **æ¸…æ™°åº¦è°ƒæ•´**ï¼š
  - æ­£å€¼ï¼šå¢å¼ºä¸­é—´è°ƒå¯¹æ¯”åº¦ï¼Œè®©å›¾åƒæ›´é”åˆ©
  - è´Ÿå€¼ï¼šå‡å°‘ä¸­é—´è°ƒå¯¹æ¯”åº¦ï¼Œäº§ç”ŸæŸ”ç„¦æ•ˆæœ
- **å»è–„é›¾è°ƒæ•´**ï¼š
  - æ­£å€¼ï¼šå‡å°‘é›¾éœ¾ï¼Œå¢å¼ºæ¸…æ™°åº¦å’Œè‰²å½©é¥±å’Œåº¦
  - è´Ÿå€¼ï¼šå¢åŠ é›¾éœ¾æ•ˆæœï¼Œè¥é€ æœ¦èƒ§æ°›å›´
- **ç»„åˆä½¿ç”¨å»ºè®®**ï¼š
  - é£æ™¯ç…§ç‰‡ï¼šçº¹ç†+10ï¼Œæ¸…æ™°åº¦+20ï¼Œå»è–„é›¾+15
  - äººåƒç…§ç‰‡ï¼šçº¹ç†-10ï¼Œæ¸…æ™°åº¦+5ï¼Œå»è–„é›¾+5
  - å»ºç­‘æ‘„å½±ï¼šçº¹ç†+20ï¼Œæ¸…æ™°åº¦+25ï¼Œå»è–„é›¾+10

#### é®ç½©åº”ç”¨æŠ€å·§
- äººåƒçš®è‚¤ï¼šå»ºè®®2-4åƒç´ ç¾½åŒ–
- å¤©ç©ºèƒŒæ™¯ï¼šå»ºè®®5-10åƒç´ ç¾½åŒ–
- ç‰©ä½“è¾¹ç¼˜ï¼šå»ºè®®1-3åƒç´ ç¾½åŒ–
- å¤§é¢ç§¯åŒºåŸŸï¼šå»ºè®®8-15åƒç´ ç¾½åŒ–

### ğŸ†• æœ€è¿‘æ›´æ–°

#### 2025-06-22 - é¡¹ç›®å…¨é¢æ¨¡å—åŒ–é‡æ„
- **æ¶æ„å‡çº§**ï¼šå°†3591è¡Œçš„å•ä½“nodes.pyæ–‡ä»¶é‡æ„ä¸ºæ¸…æ™°çš„æ¨¡å—åŒ–æ¶æ„
- **ä»£ç ç»„ç»‡**ï¼šåˆ›å»ºäº†6ä¸ªåŠŸèƒ½æ¨¡å—ï¼ˆcoreã€photoshopã€lightroomã€camera_rawã€effectsã€analysisã€presetsï¼‰
- **å¯ç»´æŠ¤æ€§æå‡**ï¼šæ¯ä¸ªèŠ‚ç‚¹ç‹¬ç«‹æ–‡ä»¶ï¼Œä¾¿äºç»´æŠ¤å’Œæ‰©å±•
- **ä»£ç å¤ç”¨**ï¼šé€šè¿‡BaseImageNodeåŸºç±»æ¶ˆé™¤é‡å¤ä»£ç 
- **æ€§èƒ½ä¼˜åŒ–**ï¼šä¿®å¤äº†PhotoshopLevelsNodeçš„é¢„è§ˆé—®é¢˜ï¼Œæ·»åŠ äº†ç›´æ¥é¢„è§ˆåŠŸèƒ½

#### 2025-06-21 - æ–°å¢Camera Rawå¢å¼ºèŠ‚ç‚¹
- é›†æˆAdobe Camera Rawçš„ä¸‰ä¸ªæ ¸å¿ƒå¢å¼ºåŠŸèƒ½ï¼šçº¹ç†ã€æ¸…æ™°åº¦ã€å»è–„é›¾
- æ”¯æŒ-100åˆ°100çš„è°ƒæ•´èŒƒå›´ï¼Œæä¾›ä¸“ä¸šçº§å›¾åƒå¢å¼ºæ•ˆæœ
- åŒ…å«å®Œæ•´çš„å‰ç«¯å®æ—¶é¢„è§ˆç•Œé¢

#### Color GradingåŠŸèƒ½é‡å¤§æ”¹è¿›
- **ä¿®å¤é¥±å’Œåº¦-100åè‰²é—®é¢˜**ï¼šç°åœ¨-100é¥±å’Œåº¦èƒ½å®ç°å®Œå…¨ç°åº¦æ•ˆæœï¼Œä¸å†äº§ç”Ÿé’è‰²ç­‰åè‰²
- **æ–°å¢è´Ÿé¥±å’Œåº¦æ”¯æŒ**ï¼š-100åˆ°+100å®Œæ•´é¥±å’Œåº¦èŒƒå›´ï¼Œè´Ÿå€¼å®ç°å»é¥±å’Œæ•ˆæœ
- **Shifté”®äº¤äº’å¢å¼º**ï¼šæŒ‰ä½Shifté”®åœ¨è‰²è½®ä¸Šæ“ä½œå¯è®¾ç½®è´Ÿé¥±å’Œåº¦å€¼  
- **è‰²è½®è§†è§‰æŒ‡ç¤ºå™¨**ï¼šç™½è‰²æŒ‡ç¤ºå™¨è¡¨ç¤ºæ­£é¥±å’Œåº¦ï¼Œç°è‰²æŒ‡ç¤ºå™¨è¡¨ç¤ºè´Ÿé¥±å’Œåº¦
- **Labè‰²å½©ç©ºé—´ä¼˜åŒ–**ï¼šä¿®æ­£äº†Labä¸­æ€§å€¼è®¡ç®—ï¼Œç¡®ä¿å®Œå…¨å»é¥±å’Œæ—¶çš„è‰²å½©å‡†ç¡®æ€§
- **å…¨å±€å»é¥±å’Œæ£€æµ‹**ï¼šå½“æ‰€æœ‰åŒºåŸŸéƒ½è®¾ä¸º-100é¥±å’Œåº¦æ—¶ï¼Œè‡ªåŠ¨åº”ç”¨å…¨å±€ç°åº¦è½¬æ¢
- **æ”¹è¿›çš„äº®åº¦é®ç½©ç®—æ³•**ï¼šä½¿ç”¨sigmoidå‡½æ•°åˆ›å»ºå¹³æ»‘è¿‡æ¸¡ï¼Œæ›´æ¥è¿‘Lightroomæ•ˆæœ
- **å¤šç§æ··åˆæ¨¡å¼æ”¯æŒ**ï¼šæ·»åŠ multiplyã€screenã€overlayã€soft_lightç­‰ä¸“ä¸šæ··åˆé€‰é¡¹
- **å®æ—¶é¢„è§ˆæ€§èƒ½ä¼˜åŒ–**ï¼šæå‡å¼¹çª—å†…é¢„è§ˆå“åº”é€Ÿåº¦å’Œå‡†ç¡®æ€§

### ğŸ“„ è®¸å¯è¯

MITè®¸å¯è¯ - æŸ¥çœ‹ [LICENSE](LICENSE) æ–‡ä»¶ã€‚

---

## English

Professional color adjustment extension for ComfyUI with Photoshop-like Curve, HSL, and Levels adjustment functionality, 70+ preset styles, advanced mask support, and Lightroom-style Color Grading. **The standout feature is the ability to double-click nodes to open popup windows with real-time preview that allows you to color grade with the precision of professional image editing software.**

### ğŸŒŸ Key Features

#### ğŸ¨ Curve Adjustment (Photoshop Curve)
![Photoshop Curve Node](images/PS_Curve.png)
- Professional Photoshop-style curve adjustment with multiple interpolation methods
- **Double-click node for real-time adjustment interface**: Directly drag control points in the popup window and instantly see image changes
- Real-time curve chart with optional histogram background display
- Support for RGB overall or individual R/G/B channel adjustment
- Adjustable curve effect intensity (0-200%)
- **Popup window adjustments apply immediately**: All curve modifications can be viewed in real-time within the popup without re-running the workflow

#### ğŸ­ HSL Adjustment (Photoshop HSL)
![Photoshop HSL Node](images/HSL.png)
- Precise control over 8 color channels: Red, Orange, Yellow, Green, Cyan, Blue, Purple, Magenta
- Independent adjustment of Hue, Saturation, and Lightness for each color
- **Double-click node to open HSL adjustment popup**: Slide controllers in the popup window to immediately see color change effects, WYSIWYG
- Support for masks and feathering effects
- **Real-time interactive response in popup**: Any HSL parameter adjustment in the popup interface instantly reflects in the preview image

#### ğŸšï¸ Levels Adjustment (Photoshop Levels)
![Photoshop Levels Node](images/PS_Levels.png)
- **Double-click node for Photoshop-style levels adjustment interface**: Professional three-point control (black point, gray point, white point)
- **Real-time preview adjustment**: Drag sliders to instantly see levels adjustment effects
- **Auto levels function**: One-click automatic optimization of image contrast and level distribution
- **Auto contrast function**: Intelligent image contrast enhancement
- **Precise numerical control**: Accurate adjustment of input/output black/white points and gamma values
- **Histogram background display**: Shows real-time histogram in levels interface for precise adjustments

#### ğŸ¨ Color Grading
![Color Grading Node](images/ColorGradingWheels.png)
- **Double-click for Lightroom-style color grading interface**: Professional three-wheel design (shadows, midtones, highlights)
- **Real-time interactive color wheel operation**: Directly drag on wheels to adjust hue and saturation with instant preview
- **Full desaturation at -100 saturation**: -100 saturation achieves complete grayscale effect without color cast
- **Shift key for negative saturation**: Hold Shift while operating on color wheels to set negative saturation values
- **Precise Lab color space processing**: Professional Lab color algorithm ensures color accuracy
- **Multiple blend modes**: normal, multiply, screen, overlay, soft_light and other professional blending options
- **Intelligent region masking**: Smooth transition masks based on luminance for precise control of shadows, midtones, highlights
- **Strength control**: Adjustable overall effect intensity (0-200%)

#### ğŸ“Š Histogram Analysis
![Histogram Analysis Node](images/Histogram_Analysis.png)
- Professional image histogram analysis node
- **Detailed statistical information**: Mean, median, standard deviation and other image statistics
- **Pixel distribution visualization**: Clear display of image brightness and color distribution
- **Multi-channel support**: Supports RGB overall or individual R/G/B channel analysis
- Provides data reference for other adjustment nodes

#### ğŸ¯ Camera Raw Enhance
![Camera Raw Enhance Node](images/CameraRawEnhanced.png)
- Integrates three core Adobe Camera Raw enhancement features
- **Texture**: Enhances medium-sized detail contrast, range -100 to 100
- **Clarity**: Enhances midtone contrast for sharper images, range -100 to 100
- **Dehaze**: Reduces or adds atmospheric haze effect, range -100 to 100
- Supports blend control and overall strength adjustment
- Includes complete frontend JavaScript interface with real-time preview

#### ğŸ–¼ï¸ Preset Styles (Curve Preset)
- 70+ professional color grading presets
- Covers portrait, landscape, cinematic, vintage, and more
- One-click application for quick professional color grading

#### ğŸ¯ Advanced Mask Support
- Selective adjustment of specific areas
- Mask edge feathering for natural transitions
- Support for mask inversion

#### ğŸ’¡ Interactive Editing
- **Double-click nodes to open professional adjustment popup** with real-time preview in the window
- **All adjustment parameters in the popup sync instantly** without re-running the workflow
- **Zero-delay feedback**: Images update in real-time in the popup window as parameters are adjusted, as smooth as using professional image editing software
- Supports interactive editing for Curve, HSL, Levels and Color Grading nodes
- Professional editing experience similar to Photoshop and Lightroom

### ğŸ“¥ Installation

#### Git Clone (Recommended)
```bash
cd ComfyUI/custom_nodes
git clone https://github.com/your-username/ComfyUI-Curve.git
```

#### Manual Download
1. Download ZIP file
2. Extract to `ComfyUI/custom_nodes/ComfyUI-Curve`
3. Restart ComfyUI

#### Dependencies
- torch>=1.9.0
- numpy>=1.21.0
- scipy>=1.7.0

### ğŸ“ Usage Tips

#### How to Use Popup Real-time Preview

1. **Curve Adjustment Real-time Preview**:
   - Add Photoshop Curve node to your workflow
   - Connect input image and mask (optional)
   - **Double-click the node** to open the adjustment popup window
   - You'll see the image preview area and curve editing area in the popup
   - Add control points in the popup: **Click on the curve** to add a new control point
   - Move control points in the popup: **Left-click and drag** a control point to see real-time image changes
   - Delete control points in the popup: **Right-click** on a control point
   - Switch channels in the popup: Click on **RGB, R, G, B** buttons to toggle different channel curves
   - Adjust intensity in the popup: Move the **intensity slider** to instantly see different strength effects
   - When finished, click **Apply** in the popup window and parameters will automatically sync to the node

2. **HSL Adjustment Real-time Preview**:
   - Add Photoshop HSL node to your workflow
   - Connect input image and mask (optional)
   - **Double-click the node** to open the HSL adjustment popup window
   - In the popup window, select the color channel you want to adjust (Red, Orange, Yellow, etc.)
   - Move **Hue slider** in the popup: Drag left/right to adjust the hue value for that color
   - Move **Saturation slider** in the popup: Drag left/right to adjust the saturation
   - Move **Lightness slider** in the popup: Drag left/right to adjust the lightness
   - Each slider adjustment in the popup will **update the preview image in real-time**
   - When finished, click **Apply** in the popup window and parameters will automatically sync to the node

3. **Color Grading Real-time Preview**:
   - Add Color Grading node to your workflow
   - Connect input image and mask (optional)
   - **Double-click the node** to open the color grading popup window
   - In the popup, you'll see three color wheels for shadows, midtones, and highlights
   - **Color wheel operation techniques**:
     - Normal click and drag: Set positive saturation (enhance colors)
     - **Hold Shift key and drag**: Set negative saturation (desaturation effect)
     - Wheel indicator colors: White circle = positive saturation, Gray circle = negative saturation
   - **Saturation sliders**: -100 to +100 range
     - Positive values: Enhance color saturation in that region
     - Negative values: Reduce color saturation in that region (toward grayscale)
     - -100: Complete desaturation of that region to grayscale
   - Use luminance sliders to adjust brightness levels for each region
   - Select blend mode to control how colors are applied
   - Adjust overall strength to control effect intensity
   - Preview window updates in real-time, showing exactly what you'll get
   - When finished, click **Apply** in the popup window and parameters will automatically sync to the node


5. **Levels Adjustment Real-time Preview**:
   - Add Photoshop Levels node to your workflow
   - Connect input image and mask (optional)
   - **Double-click the node** to open levels adjustment popup
   - In the popup window you'll see levels adjustment interface with histogram background
   - **Three-point control adjustment**:
     - Left slider: Adjust black point (input shadow range)
     - Middle slider: Adjust gamma value (midtone brightness)
     - Right slider: Adjust white point (input highlight range)
   - **Output levels adjustment**: Set output black and white point range
   - **Auto functions**:
     - Click "Auto Levels" button to automatically optimize image contrast
     - Click "Auto Contrast" button for intelligent contrast enhancement
   - All adjustments display effects in real-time in the preview window
   - When finished, click **Apply** in the popup window and parameters will automatically sync to the node

4. **Popup Preview Interface Common Operations**:
   - **Zoom in/out preview**: Use mouse wheel or +/- buttons in the popup
   - **Pan preview**: Hold middle mouse button and drag in the popup
   - **Compare with original**: Hold spacebar in the popup to view original image, release to return to adjusted effect
   - **Reset parameters**: Click the reset button in the popup to restore default settings
   - **Cancel editing**: Click cancel button in the popup to discard current changes
   - **Apply editing**: Click apply button in the popup to confirm changes and sync to node

#### Curve Adjustment Tips
- S-curve: Increases contrast
- Inverse S-curve: Reduces contrast
- Moving curve up: Brightens image
- Moving curve down: Darkens image
- Curve format: `x1,y1;x2,y2;x3,y3` (e.g., `0,0;128,150;255,255`)
- **Real-time preview tip**: Use multiple control points in the popup window to fine-tune local areas, observe real-time effects to find optimal adjustments

#### HSL Adjustment Tips
- Skin tone adjustment: Fine-tune Red and Orange hue and saturation
- Sky enhancement: Adjust Blue and Cyan channels
- Foliage enhancement: Adjust Green and Yellow channels
- Sunset effect: Enhance Orange and Magenta channels
- **Real-time preview tip**: In the popup window, adjust channels one by one while observing real-time effects to find the ideal color balance

#### Histogram Analysis Tips
- **Brightness distribution assessment**:
  - Left-side clustering: Image is too dark, consider brightening
  - Right-side clustering: Image is too bright, consider darkening
  - Center concentration: Low contrast, needs contrast enhancement
  - Bimodal distribution: Rich image layers with good contrast
- **Color channel analysis**:
  - R/G/B channel shifts: Identify color cast issues
  - Excessive concentration in one channel: Color saturation may be too high or low
- **Statistical data application**:
  - Mean: Judge overall brightness level
  - Standard deviation: Evaluate image contrast and tonal range
  - Median: Understand pixel distribution balance point

#### Levels Adjustment Tips
- **Three-point control strategy**:
  - Black point: Set position of darkest part in image, affects shadow detail
  - White point: Set position of brightest part in image, affects highlight detail
  - Gamma value: Adjust midtone brightness, <1 brightens, >1 darkens
- **Auto function usage**:
  - Auto Levels: Suitable for quick correction of underexposed or overexposed images
  - Auto Contrast: Suitable for flat images lacking contrast
- **Output levels control**:
  - Compress dynamic range: Suitable for print output or special effects
  - Expand output range: Enhance image contrast
- **Combined histogram adjustment**: Observe histogram changes to avoid over-adjustment causing tone breaks

#### Color Grading Tips
- **Saturation adjustment techniques**:
  - Positive saturation (1-100): Enhance color vibrancy in that region
  - Negative saturation (-1 to -100): Reduce color vibrancy toward grayscale
  - All regions at -100 saturation: Achieve complete grayscale effect, perfect for black & white photo foundation
  - Selective desaturation: Apply negative saturation only to specific regions (shadows or highlights)
- **Color wheel operation techniques**:
  - Normal drag: Adjust hue and positive saturation
  - Shift+drag: Adjust hue and negative saturation (desaturation direction)
  - Watch indicators: White dot = positive saturation, Gray dot = negative saturation
- **Stylistic color grading**:
  - Cinematic look: Add blue to shadows and warm tones to highlights
  - Vintage effect: Add cyan to shadows and orange/yellow to highlights
  - Sunset effect: Add purple to shadows and orange to highlights
  - Cool tone style: Adjust all regions toward blue-cyan tones
  - Warm tone style: Adjust all regions toward orange-yellow tones
- **Blend mode applications**:
  - soft_light: Natural color enhancement, suitable for subtle adjustments
  - overlay: Strong contrast enhancement, suitable for dramatic effects
  - multiply: Darkening effect, suitable for creating mysterious atmosphere
  - screen: Brightening effect, suitable for dreamy styles

#### Camera Raw Enhancement Tips
- **Texture adjustment**:
  - Positive values (1-100): Enhance details for more texture
  - Negative values (-1 to -100): Soften details, suitable for portrait skin
- **Clarity adjustment**:
  - Positive values: Enhance midtone contrast for sharper images
  - Negative values: Reduce midtone contrast for soft focus effect
- **Dehaze adjustment**:
  - Positive values: Reduce haze, enhance clarity and color saturation
  - Negative values: Add haze effect for dreamy atmosphere
- **Combination suggestions**:
  - Landscape photos: Texture +10, Clarity +20, Dehaze +15
  - Portrait photos: Texture -10, Clarity +5, Dehaze +5
  - Architecture photography: Texture +20, Clarity +25, Dehaze +10

#### Mask Application Tips
- Portrait skin: Recommended 2-4 pixel feathering
- Sky background: Recommended 5-10 pixel feathering
- Object edges: Recommended 1-3 pixel feathering
- Large areas: Recommended 8-15 pixel feathering

### ğŸ†• Recent Updates

#### 2025-06-22 - Complete Modular Refactoring
- **Architecture Upgrade**: Refactored 3591-line monolithic nodes.py file into clear modular architecture
- **Code Organization**: Created 6 functional modules (core, photoshop, lightroom, camera_raw, effects, analysis, presets)
- **Maintainability Enhancement**: Each node in independent file, easy to maintain and extend
- **Code Reuse**: Eliminated duplicate code through BaseImageNode base class
- **Performance Optimization**: Fixed PhotoshopLevelsNode preview issue, added direct preview functionality

#### 2025-06-21 - New Camera Raw Enhance Node
- Integrated three core Adobe Camera Raw enhancement features: Texture, Clarity, Dehaze
- Supports -100 to 100 adjustment range for professional-grade image enhancement
- Includes complete frontend real-time preview interface

#### Major Color Grading Improvements
- **Fixed -100 saturation color cast issue**: -100 saturation now achieves complete grayscale effect without cyan or other color casts
- **Added negative saturation support**: Full -100 to +100 saturation range, negative values achieve desaturation effects
- **Enhanced Shift key interaction**: Hold Shift key while operating on color wheels to set negative saturation values
- **Color wheel visual indicators**: White indicators for positive saturation, gray indicators for negative saturation
- **Lab color space optimization**: Corrected Lab neutral value calculations for accurate color when fully desaturated
- **Global desaturation detection**: Automatically applies global grayscale conversion when all regions are set to -100 saturation
- **Improved luminance mask algorithm**: Uses sigmoid functions for smooth transitions, closer to Lightroom effects
- **Multiple blend mode support**: Added multiply, screen, overlay, soft_light and other professional blending options
- **Real-time preview performance optimization**: Improved popup preview response speed and accuracy

### ğŸ“„ License

MIT License - See [LICENSE](LICENSE) file.

---

<div align="center">

**If this project helps you, please give it a Star!**

</div>